<!DOCTYPE html>
<html>
<head>
    <title></title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB" crossorigin="anonymous">


    <style type="text/css">
        label{
            font-weight: 600;
        }
        .config_list_div{
            margin-left: 20px;
        }
        .item_div_1{
        }
        .item_div_2{
        }
        .item_title{
            background: #eee;
        }
    </style>
</head>
<body>
<h4>Listeners</h4>
<div class="config_list_div listeners_div"></div>
<h4>Applications</h4>
<div class="config_list_div apps_div"></div>

<script type="text/javascript" src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
<script type="text/javascript">
    update_data();
    function update_data(){
        $.ajax({
            url:"/config",
            type:'GET',
            cache:false,
            dataType: 'json',
            success:function(Data){
                if (Data.code==0){
                    fill_data(Data.config);
                }else{
                    alert(Data);
                }
            },
            error:function(){
                alert("error");
            }
        });
    }

    function fill_data(config) {
        var listeners = config.listeners;
        for (var l in listeners){
            var item_div_1 = $("<div class='item_div_1'></div>");
            $('.listeners_div').append("<h5 class='item_title'>"+l+"<h5>");
            $('.listeners_div').append(item_div_1);
            for (var i in listeners[l]){
                var item_div_2 = $("<div class='item_div_2'></div>");
                item_div_1.append(item_div_2);
                item_div_2.append("<label>"+i+":<label>");
                item_div_2.append("<span>"+listeners[l][i]+"</span>");
            };
        };
        var apps = config.applications;
        for (var l in apps){
            var item_div_1 = $("<div class='item_div_1'></div>");
            $('.apps_div').append("<h5 class='item_title'>"+l+"<h5>");
            $('.apps_div').append(item_div_1);
            for (var i in apps[l]){
                var item_div_2 = $("<div class='item_div_2'></div>");
                item_div_1.append(item_div_2);
                item_div_2.append("<label>"+i+":<label>");
                item_div_2.append("<span>"+apps[l][i]+"</span>");
            };
        };
    }
</script>
</body>
</html>